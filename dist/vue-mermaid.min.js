var VueMermaid=function(n){"use strict";function e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t(n,e){return o(n)||c(n,e)||u(n,e)||l()}function r(n){return i(n)||a(n)||u(n)||d()}function i(n){if(Array.isArray(n))return s(n)}function o(n){if(Array.isArray(n))return n}function a(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}function c(n,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n)){var t=[],r=!0,i=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(n){i=!0,o=n}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}}function u(n,e){if(n){if("string"==typeof n)return s(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(n,e):void 0}}function s(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(n,e,t,r,i,o,a,c,u,s){"boolean"!=typeof a&&(u=c,c=a,a=!1);var d="function"==typeof t?t.options:t;n&&n.render&&(d.render=n.render,d.staticRenderFns=n.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),r&&(d._scopeId=r);var l;if(o?(l=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),e&&e.call(this,u(n)),n&&n._registeredComponents&&n._registeredComponents.add(o)},d._ssrRegister=l):e&&(l=a?function(){e.call(this,s(this.$root.$options.shadowRoot))}:function(n){e.call(this,c(n))}),l)if(d.functional){var f=d.render;d.render=function(n,e){return l.call(e),f(n,e)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,l):[l]}return t}function p(n){return function(n,e){return m(n,e)}}function m(n,e){var t=b?e.media||"default":n,r=S[t]||(S[t]={ids:new Set,styles:[]});if(!r.ids.has(n)){r.ids.add(n);var i=e.source;if(e.map&&(i+="\n/*# sourceURL="+e.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",e.media&&r.element.setAttribute("media",e.media),g.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(i),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{var o=r.ids.size-1,a=document.createTextNode(i),c=r.element.childNodes;c[o]&&r.element.removeChild(c[o]),c.length?r.element.insertBefore(a,c[o]):r.element.appendChild(a)}}}function y(n){n.component("vue-mermaid",k)}n=n&&n.hasOwnProperty("default")?n.default:n;var h={name:"VueMermaid",props:{type:{type:String,default:"graph TD"},nodes:{type:Array,required:!0},styles:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{}}},defaultConfig:{type:Object,default:function(){return{theme:"default",startOnLoad:!1,securityLevel:"loose"}}},stopOnError:{type:Boolean,default:!1}},data:function(){return{edges:[{type:"default",open:"[",close:"]"},{type:"round",open:"(",close:")"},{type:"circle",open:"((",close:"))"},{type:"asymetric",open:">",close:"]"},{type:"rhombus",open:"{",close:"}"}]}},mounted:function(){this.init(),this.loadNodes()},computed:{nodeObject:function(){var n=this.nodes;if(Array.isArray(n)&&n.length>0){return function(n,t){return Object.assign.apply(Object,[{}].concat(r(n.map(function(n){return e({},n[t],n)}))))}(n,"id")}return{}},customStyle:function(){var n=this.nodes,e=this.styles,t=n.filter(function(n){return n.style}).map(function(n){return"style ".concat(n.id," ").concat(n.style)}),r=n.filter(function(n){return n.linkStyle}).map(function(e){return"linkStyle ".concat(e.linkNumber||n.indexOf(e)," ").concat(e.linkStyle)});return t.concat(e).concat(r)},parseCode:function(){var n=this.nodes;if(Array.isArray(n)&&n.length>0){var e=this.type+"\n",t=e+this.getGroupNodes(n)+this.customStyle.join(" \n");return this.load(t),console.log(t),t}return""}},methods:{getGroupNodes:function(n){var e=this,i=new Map;return n.forEach(function(n){var e=n.group||"",t=i.get(e)||{nids:new Set,narr:[]};t.nids.add(n.id),t.narr.push(n),i.set(e,t)}),r(i.entries()).map(function(n){var r=t(n,2),i=r[0],o=r[1],a=o.nids,c=o.narr;if(""!==i){var u=[],s=[];c.forEach(function(n){n.next?(u.push({id:n.id,text:n.text,style:n.style}),n.next.forEach(function(e){a.has(e)?u.push({id:n.id,text:n.text,link:n.link,next:[e]}):s.push({id:n.id,text:n.text,link:n.link,next:[e]})})):u.push(n)});var d=e.buildNodesStr(u),l=e.buildNodesStr(s);return"subgraph ".concat(i," \n ").concat(d," end \n ").concat(l)}return e.buildNodesStr(c)}).join(" \n")},buildNodesStr:function(n){var e=this;return n.map(function(n){return n.next&&n.next.length>0?n.next.map(function(t,r){var i=e.nodeObject[t]||e.nodeObject[t.id];return null!=i&&void 0!==i?"".concat(e.buildNode(n)).concat(e.buildLink(n,r)).concat(e.buildNode(i)):"".concat(e.buildNode(n))}).join("\n"):"".concat(e.buildNode(n))}).join("\n")+"\n"+n.filter(function(n){return n.editable}).map(function(n){return"click ".concat(n.id," mermaidClick")}).join("\n")+"\n"+n.filter(function(n){return n.url}).map(function(n){return"click ".concat(n.id,' "').concat(n.url,'"')}).join("\n")+"\n"},buildNode:function(n){var e=n.edgeType?this.edges.find(function(e){return e.type===n.edgeType}):this.edges.find(function(n){return"default"===n.type});return"".concat(n.id).concat(e.open).concat(n.text).concat(e.close)},buildLink:function(n,e){return n.link?Array.isArray(n.link)?n.link.length>e?n.link[e]:n.link[n.link.length-1]:n.link:"--\x3e"},loadNodes:function(){this.load(this.parseCode)},init:function(){var e=this;window.mermaidClick=function(n){e.edit(n)},n.initialize(Object.assign(this.defaultConfig,this.config))},load:function(e){if(e){var t=document.getElementById("mermaid");if(t){t.removeAttribute("data-processed"),t.replaceChild(document.createTextNode(e),t.firstChild);try{n.init(e,t)}catch(n){if(this.stopOnError)throw n}}}},edit:function(n){this.$emit("nodeClick",n)}}},v=f,b="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase()),g=document.head||document.getElementsByTagName("head")[0],S={},C=p;const j=h;var x=function(){var n=this,e=n.$createElement;return(n._self._c||e)("div",{staticClass:"mermaid",attrs:{id:"mermaid"}},[n._v(n._s(n.parseCode))])},_=[];x._withStripped=!0;var k=v({render:x,staticRenderFns:_},function(n){n&&n("data-v-c574217a_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"vue-mermaid.vue"},media:void 0})},j,void 0,!1,void 0,C,void 0);return{install:y}}(mermaid);
